# Usage guide

## Prerequisites

- Python 3
- [Miri](https://github.com/rust-lang/miri)
- [Crux](https://github.gatech.edu/ybae38/Crux)
- [sccache](https://github.com/mozilla/sccache)
  - Technically it can be optional, but I was lazy.
  - `sccache` should be on `PATH`

## Metadata Format

### target

- **crate**: the name of the crate
- **version**: the version to test the poc

### test (WIP)

- **analyzers**: an array of analyzers that are expected to report bugs for this crate (array)
- **cargo_flags**: Cargo flags to append, for example `["--release"]` (optional, array)

### report

- **title**: issue title
- **description**: issue description
- **code_snippets**: code snippets that will be only included in the issue report (array)
- **issue_url**: original repository issue URL (autogenerated, optional)
- **issue_date**: disclosure date (autogenerated **OR** manual, date)
- **patched**: RustSec `versions.patched` (array)
- **unaffected**: RustSec `versions.unaffected` (optional, array)
- **rustsec_url**: RustSec PR URL (autogenerated)
- **rustsec_id**: RustSec ID (autogenerated)

## Workflow

### 1. PoC generation

```shell
./poc.py add <crate> <version>
```

### 2. PoC testing

Fill in the metadata section and complete the PoC code.

```shell
./poc.py run <PoC ID>
```

### 3. Issue reporting (WIP)

```shell
# reports to both the original repository and RustSec
./poc.py report <PoC ID>
# reports only to the original repository
./poc.py report --original <PoC ID>
# and then later reports to RustSec
./poc.py report --rustsec <PoC ID>
```

Reporting Guideline:

- If the crate seems unmaintained, reports both to the original repository and RustSec
- Otherwise, report to the original repository first and wait for the developer to confirm
